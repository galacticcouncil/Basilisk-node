<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Gossipsub is a P2P pubsub (publish/subscription) routing layer designed to extend upon floodsub and meshsub routing protocols."><meta name="keywords" content="rust, rustlang, rust-lang, libp2p_gossipsub"><title>libp2p_gossipsub - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e963ab4a0d0c903e.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-046227e470cd3629.css"><link rel="stylesheet" disabled href="../static.files/dark-800f2ee593c8e6f7.css"><link rel="stylesheet" disabled href="../static.files/ayu-9edae3c387f5a5b3.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-287cecec4dbb45b0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../libp2p_gossipsub/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../libp2p_gossipsub/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate libp2p_gossipsub</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.39.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">libp2p_gossipsub</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/libp2p_gossipsub/lib.rs.html#21-174">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Gossipsub is a P2P pubsub (publish/subscription) routing layer designed to extend upon
floodsub and meshsub routing protocols.</p>
<h2 id="overview"><a href="#overview">Overview</a></h2>
<p><em>Note: The gossipsub protocol specifications
(https://github.com/libp2p/specs/tree/master/pubsub/gossipsub) provide an outline for the
routing protocol. They should be consulted for further detail.</em></p>
<p>Gossipsub  is a blend of meshsub for data and randomsub for mesh metadata. It provides bounded
degree and amplification factor with the meshsub construction and augments it using gossip
propagation of metadata with the randomsub technique.</p>
<p>The router maintains an overlay mesh network of peers on which to efficiently send messages and
metadata.  Peers use control messages to broadcast and request known messages and
subscribe/unsubscribe from topics in the mesh network.</p>
<h2 id="important-discrepancies"><a href="#important-discrepancies">Important Discrepancies</a></h2>
<p>This section outlines the current implementation’s potential discrepancies from that of other
implementations, due to undefined elements in the current specification.</p>
<ul>
<li>
<p><strong>Topics</strong> -  In gossipsub, topics configurable by the <code>hash_topics</code> configuration parameter.
Topics are of type <a href="struct.TopicHash.html" title="TopicHash"><code>TopicHash</code></a>. The current go implementation uses raw utf-8 strings, and this
is default configuration in rust-libp2p. Topics can be hashed (SHA256 hashed then base64
encoded) by setting the <code>hash_topics</code> configuration parameter to true.</p>
</li>
<li>
<p><strong>Sequence Numbers</strong> - A message on the gossipsub network is identified by the source
<a href="../libp2p_core/peer_id/struct.PeerId.html" title="libp2p_core::PeerId"><code>libp2p_core::PeerId</code></a> and a nonce (sequence number) of the message. The sequence numbers in
this implementation are sent as raw bytes across the wire. They are 64-bit big-endian unsigned
integers. They are chosen at random in this implementation of gossipsub, but are sequential in
the current go implementation.</p>
</li>
</ul>
<h2 id="peer-discovery"><a href="#peer-discovery">Peer Discovery</a></h2>
<p>Gossipsub does not provide peer discovery by itself. Peer discovery is the process by which
peers in a p2p network exchange information about each other among other reasons to become resistant
against the failure or replacement of the
<a href="https://docs.libp2p.io/reference/glossary/#boot-node">boot nodes</a> of the network.</p>
<p>Peer
discovery can e.g. be implemented with the help of the <a href="https://github.com/libp2p/specs/blob/master/kad-dht/README.md">Kademlia</a> protocol
in combination with the <a href="https://github.com/libp2p/specs/tree/master/identify">Identify</a> protocol. See the
Kademlia implementation documentation for more information.</p>
<h2 id="using-gossipsub"><a href="#using-gossipsub">Using Gossipsub</a></h2><h3 id="gossipsubconfig"><a href="#gossipsubconfig">GossipsubConfig</a></h3>
<p>The <a href="struct.Config.html"><code>GossipsubConfig</code></a> struct specifies various network performance/tuning configuration
parameters. Specifically it specifies:</p>
<p>This struct implements the <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="Default"><code>Default</code></a> trait and can be initialised via
<a href="struct.GossipsubConfig.html#method.default" title="GossipsubConfig::default()"><code>GossipsubConfig::default()</code></a>.</p>
<h3 id="gossipsub"><a href="#gossipsub">Gossipsub</a></h3>
<p>The <a href="struct.Gossipsub.html"><code>Gossipsub</code></a> struct implements the <a href="../libp2p_swarm/behaviour/trait.NetworkBehaviour.html" title="libp2p_swarm::NetworkBehaviour"><code>libp2p_swarm::NetworkBehaviour</code></a> trait allowing it to
act as the routing behaviour in a <a href="../libp2p_swarm/struct.Swarm.html" title="libp2p_swarm::Swarm"><code>libp2p_swarm::Swarm</code></a>. This struct requires an instance of
<a href="../libp2p_core/peer_id/struct.PeerId.html" title="libp2p_core::PeerId"><code>libp2p_core::PeerId</code></a> and <a href="struct.Config.html"><code>GossipsubConfig</code></a>.</p>
<h3 id="example"><a href="#example">Example</a></h3>
<p>An example of initialising a gossipsub compatible swarm:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>libp2p_gossipsub::GossipsubEvent;
<span class="kw">use </span>libp2p_core::{identity::Keypair,transport::{Transport, MemoryTransport}, Multiaddr};
<span class="kw">use </span>libp2p_gossipsub::MessageAuthenticity;
<span class="kw">let </span>local_key = Keypair::generate_ed25519();
<span class="kw">let </span>local_peer_id = libp2p_core::PeerId::from(local_key.public());

<span class="comment">// Set up an encrypted TCP Transport over the Mplex
// This is test transport (memory).
</span><span class="kw">let </span>noise_keys = libp2p_noise::Keypair::&lt;libp2p_noise::X25519Spec&gt;::new().into_authentic(<span class="kw-2">&amp;</span>local_key).unwrap();
<span class="kw">let </span>transport = MemoryTransport::default()
           .upgrade(libp2p_core::upgrade::Version::V1)
           .authenticate(libp2p_noise::NoiseConfig::xx(noise_keys).into_authenticated())
           .multiplex(libp2p_mplex::MplexConfig::new())
           .boxed();

<span class="comment">// Create a Gossipsub topic
</span><span class="kw">let </span>topic = libp2p_gossipsub::IdentTopic::new(<span class="string">&quot;example&quot;</span>);

<span class="comment">// Set the message authenticity - How we expect to publish messages
// Here we expect the publisher to sign the message with their key.
</span><span class="kw">let </span>message_authenticity = MessageAuthenticity::Signed(local_key);

<span class="comment">// Create a Swarm to manage peers and events
</span><span class="kw">let </span><span class="kw-2">mut </span>swarm = {
    <span class="comment">// set default parameters for gossipsub
    </span><span class="kw">let </span>gossipsub_config = libp2p_gossipsub::GossipsubConfig::default();
    <span class="comment">// build a gossipsub network behaviour
    </span><span class="kw">let </span><span class="kw-2">mut </span>gossipsub: libp2p_gossipsub::Gossipsub =
        libp2p_gossipsub::Gossipsub::new(message_authenticity, gossipsub_config).unwrap();
    <span class="comment">// subscribe to the topic
    </span>gossipsub.subscribe(<span class="kw-2">&amp;</span>topic);
    <span class="comment">// create the swarm
    </span>libp2p_swarm::Swarm::new(
        transport,
        gossipsub,
        local_peer_id,
    )
};

<span class="comment">// Listen on a memory transport.
</span><span class="kw">let </span>memory: Multiaddr = libp2p_core::multiaddr::Protocol::Memory(<span class="number">10</span>).into();
<span class="kw">let </span>addr = swarm.listen_on(memory).unwrap();
<span class="macro">println!</span>(<span class="string">&quot;Listening on {:?}&quot;</span>, addr);</code></pre></div>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="libp2p_gossipsub::error mod">error</a></div><div class="item-right docblock-short">Error types that can result from gossipsub.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="metrics/index.html" title="libp2p_gossipsub::metrics mod">metrics</a></div><div class="item-right docblock-short">A set of metrics used to help track and diagnose the network behaviour of the gossipsub
protocol.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="protocol/index.html" title="libp2p_gossipsub::protocol mod">protocol</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="subscription_filter/index.html" title="libp2p_gossipsub::subscription_filter mod">subscription_filter</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="time_cache/index.html" title="libp2p_gossipsub::time_cache mod">time_cache</a></div><div class="item-right docblock-short">This implements a time-based LRU cache for checking gossipsub message duplicates.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FastMessageId.html" title="libp2p_gossipsub::FastMessageId struct">FastMessageId</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Gossipsub.html" title="libp2p_gossipsub::Gossipsub struct">Gossipsub</a></div><div class="item-right docblock-short">Network behaviour that handles the gossipsub protocol.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GossipsubConfig.html" title="libp2p_gossipsub::GossipsubConfig struct">GossipsubConfig</a></div><div class="item-right docblock-short">Configuration parameters that define the performance of the gossipsub network.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GossipsubConfigBuilder.html" title="libp2p_gossipsub::GossipsubConfigBuilder struct">GossipsubConfigBuilder</a></div><div class="item-right docblock-short">The builder struct for constructing a gossipsub configuration.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GossipsubMessage.html" title="libp2p_gossipsub::GossipsubMessage struct">GossipsubMessage</a></div><div class="item-right docblock-short">The message sent to the user after a <a href="struct.RawGossipsubMessage.html" title="RawGossipsubMessage"><code>RawGossipsubMessage</code></a> has been transformed by a
<a href="trait.DataTransform.html" title="crate::DataTransform"><code>crate::DataTransform</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GossipsubRpc.html" title="libp2p_gossipsub::GossipsubRpc struct">GossipsubRpc</a></div><div class="item-right docblock-short">An RPC received/sent.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.IdentityTransform.html" title="libp2p_gossipsub::IdentityTransform struct">IdentityTransform</a></div><div class="item-right docblock-short">The default transform, the raw data is propagated as is to the application layer gossipsub.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MessageId.html" title="libp2p_gossipsub::MessageId struct">MessageId</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PeerScoreParams.html" title="libp2p_gossipsub::PeerScoreParams struct">PeerScoreParams</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PeerScoreThresholds.html" title="libp2p_gossipsub::PeerScoreThresholds struct">PeerScoreThresholds</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RawGossipsubMessage.html" title="libp2p_gossipsub::RawGossipsubMessage struct">RawGossipsubMessage</a></div><div class="item-right docblock-short">A message received by the gossipsub system and stored locally in caches..</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Topic.html" title="libp2p_gossipsub::Topic struct">Topic</a></div><div class="item-right docblock-short">A gossipsub topic.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TopicHash.html" title="libp2p_gossipsub::TopicHash struct">TopicHash</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TopicScoreParams.html" title="libp2p_gossipsub::TopicScoreParams struct">TopicScoreParams</a></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.GossipsubEvent.html" title="libp2p_gossipsub::GossipsubEvent enum">GossipsubEvent</a></div><div class="item-right docblock-short">Event that can be emitted by the gossipsub behaviour.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.GossipsubVersion.html" title="libp2p_gossipsub::GossipsubVersion enum">GossipsubVersion</a></div><div class="item-right docblock-short">Selector for custom Protocol Id</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MessageAcceptance.html" title="libp2p_gossipsub::MessageAcceptance enum">MessageAcceptance</a></div><div class="item-right docblock-short">Validation kinds from the application for received messages.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MessageAuthenticity.html" title="libp2p_gossipsub::MessageAuthenticity enum">MessageAuthenticity</a></div><div class="item-right docblock-short">Determines if published messages should be signed or not.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ValidationMode.html" title="libp2p_gossipsub::ValidationMode enum">ValidationMode</a></div><div class="item-right docblock-short">The types of message validation that can be employed by gossipsub.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DataTransform.html" title="libp2p_gossipsub::DataTransform trait">DataTransform</a></div><div class="item-right docblock-short">A general trait of transforming a <a href="struct.RawGossipsubMessage.html" title="RawGossipsubMessage"><code>RawGossipsubMessage</code></a> into a <a href="struct.GossipsubMessage.html" title="GossipsubMessage"><code>GossipsubMessage</code></a>. The
<a href="struct.RawGossipsubMessage.html" title="RawGossipsubMessage"><code>RawGossipsubMessage</code></a> is obtained from the wire and the <a href="struct.GossipsubMessage.html" title="GossipsubMessage"><code>GossipsubMessage</code></a> is used to
calculate the <a href="struct.MessageId.html" title="crate::MessageId"><code>crate::MessageId</code></a> of the message and is what is sent to the application.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Hasher.html" title="libp2p_gossipsub::Hasher trait">Hasher</a></div><div class="item-right docblock-short">A generic trait that can be extended for various hashing types for a topic.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.score_parameter_decay.html" title="libp2p_gossipsub::score_parameter_decay fn">score_parameter_decay</a></div><div class="item-right docblock-short">Computes the decay factor for a parameter, assuming the <code>decay_interval</code> is 1s
and that the value decays to zero if it drops below 0.01.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.score_parameter_decay_with_base.html" title="libp2p_gossipsub::score_parameter_decay_with_base fn">score_parameter_decay_with_base</a></div><div class="item-right docblock-short">Computes the decay factor for a parameter using base as the <code>decay_interval</code>.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.IdentTopic.html" title="libp2p_gossipsub::IdentTopic type">IdentTopic</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Sha256Topic.html" title="libp2p_gossipsub::Sha256Topic type">Sha256Topic</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="libp2p_gossipsub" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (234151769 2022-12-03)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>